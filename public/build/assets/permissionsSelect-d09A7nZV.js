import{I as m}from"./InitTomSelect-Cq3HKCL2.js";import d from"./axiosClient-DXQnQ5LA.js";import"./tom-select.complete-Dc6LGOTC.js";/* empty css                              */function f(e,s={}){const{multiple:t=!1,grouped:n=!1,createSingle:r=!0}=s;if(!e||e.tomselectInstance)return null;const a=e.dataset.selected?t?e.dataset.selected.split(",").map(l=>l.trim()):[e.dataset.selected.trim()]:[],o=e.value?Array.isArray(e.value)?e.value:[e.value]:a,i=new m(e,{urlGet:n?"/api/permissions/json?grouped=true":"/api/permissions/json",urlByIds:"/api/permissions/by-ids",urlStore:"/api/permissions",create:!0,createSingle:r,modalId:"createTomselectModal",multiple:t,closeAfterSelect:!t,createUrl:"/api/permissions/create",valueField:s.valueField||"id",labelField:s.labelField||"name",searchField:["name"],preSelectedValues:o,grouped:n,modalOptions:{fieldMapping:{permission:"name"},buttonId:"btnActionTomSelect"}});return i.ts.on("change",function(){c(i.ts)}),i}function c(e){const s=e?e.getValue():[],t=document.getElementById("permission-badges");if(t){if(t.innerHTML="",s.length===0){const n=document.createElement("small");n.className="text-muted",n.textContent="(0 permissions)",t.appendChild(n);return}d.get(`/api/permissions/by-ids?ids=${s.join(",")}`).then(n=>{const r=n.data.data||[];t.innerHTML="",r.forEach(o=>{const i=document.createElement("span");i.className="badge bg-primary me-1 mb-1",i.textContent=o.name,t.appendChild(i)});const a=document.createElement("small");a.className="text-muted ms-2",a.textContent=`(${r.length} permissions)`,t.appendChild(a)}).catch(n=>{console.error("Error fetching permission names:",n),s.forEach(r=>{const a=document.createElement("span");a.className="badge bg-secondary me-1 mb-1",a.textContent=`Permission ${r}`,t.appendChild(a)})})}}export{f as initializePermissionsTomSelect,c as updatePermissionBadges};
