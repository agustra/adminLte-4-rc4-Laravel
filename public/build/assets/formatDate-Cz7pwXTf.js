import m from"./axiosClient-8LtfCK6A.js";const S=s=>{const{deleteUrl:a,itemName:r="items",onSuccess:l,onError:o}=s;return(u,n)=>{const t=n.getSelectedRows();t.length!==0&&confirm(`Delete ${t.length} selected ${r}?`)&&m.post(a,{ids:t.map(e=>e.id)}).then(({data:e})=>{if((e==null?void 0:e.status)==="success")alert(`Successfully deleted ${t.length} ${r}!`),n.reload(),n.clearSelection(),l&&l(t,e);else{const c="Error: "+((e==null?void 0:e.message)??"Unknown error");alert(c),o&&o(new Error(c),e)}}).catch(e=>{console.error("Delete error:",e),alert(`Error deleting ${r}!`),o&&o(e)})}},b=(s={})=>{const{buttonId:a="delete-selected-btn",countSelector:r=".selected-count",buttonText:l="Delete ({count})",onSelectionChange:o}=s;return u=>{const n=document.getElementById(a);if(!n)return;const t=u.length>0,e=u.length;n.style.display=t?"inline-block":"none",n.disabled=!t;const c=n.querySelector(r);if(c&&(c.textContent=e),l.includes("{count}")&&t){const i=n.querySelector(".btn-text")||n,d=i.innerHTML;(d.includes("selected-count")||d.includes("{count}"))&&(i.innerHTML=l.replace("{count}",`<span class="selected-count">${e}</span>`))}o&&o(u,{count:e,hasSelection:t})}};b();const h=(s={})=>{var t;const{url:a,beforeSend:r,onSuccess:l,onError:o,onComplete:u,headers:n={}}=s;return{api:{url:a,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"X-CSRF-TOKEN":(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.content,...n},beforeSend:e=>r?r(e):e,success:e=>{l&&l(e)},error:(e,c,i)=>{console.error("API Error:",{error:e,status:c,message:i}),o?o(e,c,i):typeof showToast<"u"?showToast(`Error: ${i}`,"error"):alert(`Error: ${i}`)},complete:()=>{u&&u()}}}},x=(s={})=>{const{tableName:a="items",exportColumns:r=["name"],bulkDeleteHandler:l,bulkDeleteButtonId:o="delete-selected-btn",includeBulkDelete:u=!0,includeCreateButton:n=!0,createButtonId:t="btnTambah",createHandler:e,createButtonText:c="Tambah",customButtons:i=[]}=s,d=new Date().toISOString().split("T")[0],p=[];return n&&p.push({id:t,text:`<i class="fas fa-plus"></i> ${c}`,className:"btn btn-primary btn-sm me-1 btnTambah",style:"display: none;",action:e||function(){console.log(`Create ${a} clicked`)}}),p.push("copy",{extend:"csv",text:"Export",className:"btn btn-success btn-sm btn-csv",filename:`${a}-export-${d}`,exportColumns:r,titleAttr:"Export data as CSV file (Excel compatible)"},{extend:"pdf",text:"PDF",className:"btn btn-danger btn-sm btn-pdf",filename:`${a}-report-${d}`,orientation:"landscape",pageSize:"A4",exportColumns:[...r,"status"],titleAttr:"Export data as PDF file"},{extend:"print",text:"Print",className:"btn btn-warning btn-sm btn-print",orientation:"portrait",exportColumns:r,titleAttr:"Print selected columns with custom styling"},"colvis"),u&&l&&p.push({text:'Delete Bulk (<span class="selected-count">0</span>)',className:"btn btn-danger btn-sm btn-delete",enabled:!1,attr:{id:o,style:"display: none;"},action:l}),i.length>0&&p.push(...i),p},f=s=>[s.getFullYear(),String(s.getMonth()+1).padStart(2,"0"),String(s.getDate()).padStart(2,"0")].join("-"),y=()=>f(new Date);export{b as a,x as b,h as c,S as d,f,y as g};
