import f from"./axiosClient-DXQnQ5LA.js";import{a as m}from"./badgeUpdater-D7fo0NmU.js";function x(c){var l;const e={...{buttonSelector:"",dataIdAttribute:"data-id",deleteUrl:"",confirmTitle:"Apakah Anda yakin?",confirmText:"Anda tidak akan dapat mengembalikan ini!",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Tidak",spinnerDuration:300,onDeleteSuccess:null},...c};(l=document.querySelector('meta[name="csrf-token"]'))==null||l.content;async function u(n,t){var r,s;i(t,!0);try{const o=typeof e.deleteUrl=="function"?e.deleteUrl(n):`${e.deleteUrl}${n}`,a=await f.delete(o,{data:{id:n}});if(a.data.status==="success"||a.data.success===!0){showToast(a.data.message,"success");const d=typeof e.deleteUrl=="function"?e.deleteUrl(n):e.deleteUrl;m(d),typeof e.onDeleteSuccess=="function"&&e.onDeleteSuccess(n,a.data)}else showToast(a.data.message||"Terjadi kesalahan","error")}catch(o){const a=((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||"Terjadi kesalahan, silakan coba lagi.";console.error("‚ùå Kesalahan:",a),showToast(a,"error")}finally{i(t,!1)}}function i(n,t){n.innerHTML=t?'<i class="fa fa-spin fa-spinner text-white"></i>':'<i class="fa fa-trash-alt text-danger"></i>'}document.body.addEventListener("click",n=>{const t=n.target.closest(e.buttonSelector);if(!t)return;n.preventDefault();const r=t.getAttribute(e.dataIdAttribute),s=t.innerHTML;i(t,!0),setTimeout(()=>{Swal.fire({title:e.confirmTitle,text:e.confirmText,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:e.confirmButtonText,cancelButtonText:e.cancelButtonText}).then(o=>{o.isConfirmed?u(r,t):t.innerHTML=s})},e.spinnerDuration)})}export{x as D};
